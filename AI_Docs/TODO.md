# Step 9: アニメーション強化 TODO

## GSAPを使用した派手なアニメーション効果の実装

- [x] アニメーション用ディレクトリ構造の作成

  - [x] `src/animations/` ディレクトリを作成
  - [x] `src/animations/gsap/` サブディレクトリを作成
  - [x] `src/animations/framer/` サブディレクトリを作成
        完了条件: ディレクトリ構造が作成され、各ファイルが適切に配置されていること

- [x] タスク結合時の派手なエフェクト実装

  - [x] パーティクルエフェクトの作成
  - [x] スケールアニメーションの追加
  - [x] タスクレイアウトコンポーネントへの統合
        完了条件: タスク結合時に派手なエフェクトが表示されること、テストでアニメーション発火後の状態が確認できること

- [x] タスク配置エラー時のアニメーション実装

  - [x] エラー時の視覚的フィードバックの実装
  - [x] タスクプールに戻る際のアニメーション実装
        完了条件: 条件不一致時に視覚的フィードバックが表示され、タスクが自動的にタスクプールに戻ること

- [x] 時間軸のピンチ操作によるズーム機能実装

  - [x] ピンチ操作の検出機能実装
  - [x] ズームイン・アウトのアニメーション実装
  - [x] タイムラインコンポーネントへの統合
        完了条件: ピンチ操作でタイムラインのズームイン・アウトが可能で、タスク名の表示調整が行われること

- [x] 待ち時間タスクの特殊表示エフェクト実装

  - [x] 待ち時間領域の視覚的表現の実装
  - [x] 点滅や特殊エフェクトの実装
        完了条件: 待ち時間タスクが視覚的に区別でき、特殊エフェクトが表示されること

- [x] タスク解除時の分解エフェクト実装

  - [x] フラグメント分割アニメーションの実装
  - [x] フラグメントの飛散エフェクト実装
  - [x] タスク解除機能との統合
        完了条件: タスク解除時に分解エフェクトが表示され、アニメーション完了後にタスクがプールに戻ること

- [x] レベル変更時のトランジションエフェクト実装

  - [x] レベル変更の検出と状態管理の仕組みを実装する
    - 完了条件: レベルが変更されたことを検知し、トランジションのトリガーとなる状態が更新されること
  - [x] トランジションエフェクトのデザインとアニメーションを実装する (例: フェードイン/アウト、スライドなど)
    - 完了条件: レベル変更時に画面全体に適用されるトランジションアニメーションが実装されていること
  - [x] アプリケーション全体にトランジションを適用する
    - 完了条件: レベル変更時に設計されたトランジションエフェクトがスムーズに表示されること

- [x] コード品質の確保
  - [x] ユニットテストの追加
    - [x] Zustandストアのレベル変更トランジションに関するユニットテストを実装する
  - [x] `tests/unit/store.test.ts` を作成する
  - [x] `setLevel` アクションが `isTransitioning` を `true` に設定することを確認するテスト
  - [x] `setIsTransitioning` アクションが `isTransitioning` を更新することを確認するテスト
  - [x] レベル変更後、最終的に `isTransitioning` が `false` にリセットされることを（アクションの連続呼び出しで）確認するテスト
  - [x] テストがすべてパスすることを確認する (npm run test:unit)
  - [x] デバッグ用のconsole.logを削除すること
  - [x] E2Eテストの追加・修正
  - [x] リファクタリングと最適化
        完了条件: `npm run test` が全てパスし、アニメーションが滑らかに動作すること
